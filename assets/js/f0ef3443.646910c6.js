"use strict";(self.webpackChunkapi_extractor_com=self.webpackChunkapi_extractor_com||[]).push([[2798],{158:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>h});var n=r(6393);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=n.createContext({}),l=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=l(e.components);return n.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=l(r),m=o,h=u["".concat(p,".").concat(m)]||u[m]||d[m]||a;return r?n.createElement(h,i(i({ref:t},c),{},{components:r})):n.createElement(h,i({ref:t},c))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[u]="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},5642:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>p,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>u});var n=r(9122),o=r(2501),a=(r(6393),r(158)),i=["components"],s={title:"The API report"},p=void 0,l={unversionedId:"pages/overview/demo_api_report",id:"pages/overview/demo_api_report",title:"The API report",description:'This article continues the tutorial from the "What is API Extractor?" page. It\'s recommended to start there.',source:"@site/docs/pages/overview/demo_api_report.md",sourceDirName:"pages/overview",slug:"/pages/overview/demo_api_report",permalink:"/pages/overview/demo_api_report",draft:!1,editUrl:"https://github.com/microsoft/rushstack-websites/tree/main/websites/api-extractor.com/docs/pages/overview/demo_api_report.md",tags:[],version:"current",frontMatter:{title:"The API report"},sidebar:"docsSidebar",previous:{title:"A sample project",permalink:"/pages/overview/demo_project"},next:{title:"The .d.ts rollup",permalink:"/pages/overview/demo_rollup"}},c={},u=[],d={toc:u},m="wrapper";function h(e){var t=e.components,r=(0,o.Z)(e,i);return(0,a.kt)(m,(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},'This article continues the tutorial from the "',(0,a.kt)("a",{parentName:"em",href:"/pages/overview/intro"},"What is API Extractor?"),"\" page. It's recommended to start there.")),(0,a.kt)("p",null,"The first API Extractor output that we'll discuss is the \"",(0,a.kt)("strong",{parentName:"p"},"API report file"),'." Since the NPM package name for our\nexample library is ',(0,a.kt)("strong",{parentName:"p"},"@microsoft/sp-core-library"),", the default API report filename will be\n",(0,a.kt)("strong",{parentName:"p"},"etc/sp-core-library.api.md"),"."),(0,a.kt)("p",null,"The report is a ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Markdown"},"Markdown file")," comprised mostly of a large block of pseudocode\nthat concisely summarizes the API signatures. (Prior to API Extractor 7, the report used the .api.ts file extension,\nbut this caused trouble for tools that tried to interpret the pseudocode as real TypeScript code.) The API report\ncontents might look like this:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"etc/sp-core-library.api.md"),(0,a.kt)("br",null)),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-markdown"},'## API Report File for "@microsoft/sp-core-library"\n\n> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).\n\n```ts\n// @beta\ninterface ILogHandler {\n  // (undocumented)\n  error(source: string, error: Error): void;\n  // (undocumented)\n  info(source: string, message: string): void;\n  // (undocumented)\n  verbose(source: string, message: string): void;\n  // (undocumented)\n  warn(source: string, message: string): void;\n}\n\n// @public\nclass Log {\n  // @beta\n  public static initialize(logHandler: ILogHandler): void;\n  public static error(source: string, error: Error): void;\n  public static info(source: string, message: string): void;\n  public static verbose(source: string, message: string): void;\n  public static warn(source: string, message: string): void;\n}\n```\n')),(0,a.kt)("p",null,"The report file is tracked by Git. Suppose a developer makes a change to the ",(0,a.kt)("inlineCode",{parentName:"p"},"Log")," class on their local PC.\nWhen they rebuild locally (for example with the ",(0,a.kt)("inlineCode",{parentName:"p"},"--local")," command-line option for ",(0,a.kt)("a",{parentName:"p",href:"/pages/commands/api-extractor_run"},"the api-extractor tool"),"), they will see a message alerting them that the report file has changed:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"[17:01:21] Starting subtask 'api-extractor'...\n[17:01:28] [api-extractor] You have changed the Public API signature for this\nproject.  Updating 'etc/sp-core-library.api.md'\n[17:01:28] Finished subtask 'api-extractor' after 0.54 s\n")),(0,a.kt)("p",null,"The developer should commit the updated report file and include it as part of their pull request (PR). If they forget\nto do this, the PR validation will fail because it performs a production build (i.e. not using ",(0,a.kt)("inlineCode",{parentName:"p"},"--local"),"), which\ndoes not automatically update the report file. If that happens, the PR build log will show an error message like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"[17:03:37] Starting subtask 'api-extractor'...\n[17:03:44] Warning - [api-extractor] You have changed the public API signature for this project.\nPlease copy the file \"temp/sp-core-library.api.md\" to \"etc/sp-core-library.api.md\", or perform\na local build (which does this automatically). See the Git repo documentation for more info.\n[17:03:44] Finished subtask 'api-extractor' after 0.56 s\n")),(0,a.kt)("p",null,"This design enables us to define a PR branch policy that requires approval from a project stakeholder whenever\na PR changeset includes the .api.md file extension. Frivolous approvals can be annoying, so the API report file\nis designed such that a diff ",(0,a.kt)("em",{parentName:"p"},"only")," occurs when a significant contractual change has occurred."),(0,a.kt)("p",null,"What do we consider to be a significant change? From the perspective of a reviewer:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"We care about changes to function signatures, but we don't want to be bothered about\nfunction bodies (i.e. every line of code)"),(0,a.kt)("li",{parentName:"ul"},"We want to know about changes to exported declarations (e.g. ",(0,a.kt)("inlineCode",{parentName:"li"},"Log")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"ILogHandler")," in the sample project),\nbut not unexported declarations (e.g. ",(0,a.kt)("inlineCode",{parentName:"li"},"DefaultLogHandler"),") or private class members"),(0,a.kt)("li",{parentName:"ul"},"We care about ",(0,a.kt)("em",{parentName:"li"},"whether"),' people wrote documentation (e.g. presence of the "',(0,a.kt)("inlineCode",{parentName:"li"},"// (undocumented)"),"\" warning),\nbut we don't need to know every time a sentence changes"),(0,a.kt)("li",{parentName:"ul"},"We care about the release status of an item (",(0,a.kt)("inlineCode",{parentName:"li"},"@internal"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"@alpha"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"@beta"),", or ",(0,a.kt)("inlineCode",{parentName:"li"},"@public"),"), while ignoring most\nother doc comment tags"),(0,a.kt)("li",{parentName:"ul"},"Generally we DO want to monitor ",(0,a.kt)("inlineCode",{parentName:"li"},"@internal")," definitions because they affect first party consumers (but for certain\nclasses this can be suppressed via the ",(0,a.kt)("inlineCode",{parentName:"li"},"@preapproved")," tag)")),(0,a.kt)("p",null,"Having this synopsis in one easy-to-review report is very powerful. Turning on API Extractor for a project\nis often an enlightening moment. (",(0,a.kt)("em",{parentName:"p"},'"What is THAT doing in there?! These names are pretty confusing! Why didn\'t\nanyone write documentation?!"')," and so forth.) Although people work with a project's source files every day,\nit's easy to miss the big picture without a way to visualize it."))}h.isMDXComponent=!0}}]);