"use strict";(self.webpackChunkapi_extractor_com=self.webpackChunkapi_extractor_com||[]).push([[5731],{158:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var n=r(6393);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),l=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=l(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=l(r),f=o,m=u["".concat(s,".").concat(f)]||u[f]||g[f]||a;return r?n.createElement(m,i(i({ref:t},c),{},{components:r})):n.createElement(m,i({ref:t},c))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=f;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p[u]="string"==typeof e?e:o,i[1]=p;for(var l=2;l<a;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}f.displayName="MDXCreateElement"},2599:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>p,metadata:()=>l,toc:()=>u});var n=r(9122),o=r(2501),a=(r(6393),r(158)),i=["components"],p={title:"Configuring an API report"},s=void 0,l={unversionedId:"pages/setup/configure_api_report",id:"pages/setup/configure_api_report",title:"Configuring an API report",description:'_This article continues the tutorial from the "Invoking API Extractor" page.',source:"@site/docs/pages/setup/configure_api_report.md",sourceDirName:"pages/setup",slug:"/pages/setup/configure_api_report",permalink:"/pages/setup/configure_api_report",draft:!1,editUrl:"https://github.com/microsoft/rushstack-websites/tree/main/websites/api-extractor.com/docs/pages/setup/configure_api_report.md",tags:[],version:"current",frontMatter:{title:"Configuring an API report"},sidebar:"docsSidebar",previous:{title:"Invoking API Extractor",permalink:"/pages/setup/invoking"},next:{title:"Configuring a .d.ts rollup",permalink:"/pages/setup/configure_rollup"}},c={},u=[{value:"Redirecting warnings to the API report file",id:"redirecting-warnings-to-the-api-report-file",level:3}],g={toc:u},f="wrapper";function m(e){var t=e.components,r=(0,o.Z)(e,i);return(0,a.kt)(f,(0,n.Z)({},g,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},'This article continues the tutorial from the "',(0,a.kt)("a",{parentName:"em",href:"/pages/setup/invoking"},"Invoking API Extractor"),"\" page.\nIt's recommended to start there.")),(0,a.kt)("p",null,"The API report file is relatively simple to configure. The two most interesting settings are:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"apiReport.enabled")," - whether we want to generate the report at all"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"apiReport.reportFolder")," - the folder where the report will be stored")),(0,a.kt)("p",null,"For a single project, it's fine to keep the report in the default location ",(0,a.kt)("inlineCode",{parentName:"p"},'"<projectFolder>/etc/"'),".\nWhereas if you work in a monorepo with many projects, you may prefer to have all the API report files\nwritten to a central location such as ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/microsoft/rushstack/tree/main/common/reviews/api"},"common/reviews/api")," used by the ",(0,a.kt)("strong",{parentName:"p"},"rushstack"),"\nrepo where API Extractor is developed."),(0,a.kt)("p",null,"The report file should be tracked by Git, so that changes to an API signature will appear as diffs when a\npull request (PR) is created."),(0,a.kt)("p",null,"The ",(0,a.kt)("strong",{parentName:"p"},"rushstack")," repo uses a ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/microsoft/rushstack/blob/main/.github/CODEOWNERS"},".github/CODEOWNERS")," file to require approvals from\na specific list of people when an API is changed. Depending on your process, this approval can be more or\nless formalized."),(0,a.kt)("h3",{id:"redirecting-warnings-to-the-api-report-file"},"Redirecting warnings to the API report file"),(0,a.kt)("p",null,"By the way, the API report file can also be used to track specific warning types. For example, although the\n",(0,a.kt)("a",{parentName:"p",href:"/pages/messages/ae-forgotten-export"},"ae-forgotten-export")," validation is generally useful,\nsuppose there are certain cases where you purposefully do not want to export a declaration."),(0,a.kt)("p",null,"Normally the warning would be printed to the console, like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'Warning: (ae-forgotten-export) The symbol "IWidget" needs to be exported by\nthe entry point index.d.ts\n')),(0,a.kt)("p",null,"Console warnings cause the ",(0,a.kt)("strong",{parentName:"p"},"api-extractor")," tool to return a nonzero exit code, which will cause\na production build to fail. However, using the\n",(0,a.kt)("a",{parentName:"p",href:"/pages/configs/api-extractor_json#messagessectionruleaddtoapireportfile"},"addToApiReportFile"),"\nsetting, you can configure the warning to be added to the API report file instead. You would add a section\nlike this to your ",(0,a.kt)("strong",{parentName:"p"},"api-extractor.json")," file:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"awesome-widgets/config/api-extractor.json"),(0,a.kt)("br",null)),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'  . . .\n  "messages": {\n    "extractorMessageReporting": {\n      "ae-forgotten-export": {\n        "logLevel": "warning",\n        "addToApiReportFile": true\n      },\n    },\n    . . .\n  },\n  . . .\n')),(0,a.kt)("p",null,"Instead of printing the warning to the console, instead you will see something like this in your report file:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"awesome-widgets/etc/api-extractor.api.md"),(0,a.kt)("br",null)),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'// Warning: (ae-forgotten-export) The symbol "IWidget" needs to be exported\n// by the entry point index.d.ts\n//\n// @public\nexport class Widget implements IWidget {}\n')),(0,a.kt)("p",null,"If you take a look at ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/microsoft/rushstack/blob/main/apps/api-extractor/src/schemas/api-extractor-defaults.json"},"api-extractor-defaults.json"),"\nyou will see that API Extractor already does this by default for many message types. In general it defaults to true\nfor any message where the problem is not serious, but the fix may require nontrivial effort or have nontrivial\nconsequences for your API."))}m.isMDXComponent=!0}}]);