<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-pages/contributing/architecture">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Architecture notes | API Extractor</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://api-extractor.com/images/site/ae-ograph.png"><meta data-rh="true" name="twitter:image" content="https://api-extractor.com/images/site/ae-ograph.png"><meta data-rh="true" property="og:url" content="https://api-extractor.com/pages/contributing/architecture/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Architecture notes | API Extractor"><meta data-rh="true" name="description" content="If you&#x27;re interested in contributing, here&#x27;s some general architectural notes that will hopefully help you find"><meta data-rh="true" property="og:description" content="If you&#x27;re interested in contributing, here&#x27;s some general architectural notes that will hopefully help you find"><link data-rh="true" rel="icon" href="/images/site/favicon.ico"><link data-rh="true" rel="canonical" href="https://api-extractor.com/pages/contributing/architecture/"><link data-rh="true" rel="alternate" href="https://api-extractor.com/pages/contributing/architecture/" hreflang="en"><link data-rh="true" rel="alternate" href="https://api-extractor.com/pages/contributing/architecture/" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="API Extractor" href="/opensearch.xml">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic"><link rel="stylesheet" href="/assets/css/styles.968f72a5.css">
<link rel="preload" href="/assets/js/runtime~main.7c811889.js" as="script">
<link rel="preload" href="/assets/js/main.7205f7fd.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div class="suiteNavBar_rHPh"><div role="button" class="hamburger_AuD3 hamburgerInteraction_B9ML"><img src="/images/suitenav/rs-hamburger.svg"></div><div class="hamburgerDivider_zNDB"></div><a href="https://rushstack.io/pages/overview/roadmap/" class="suiteNavItem_tL2w">Roadmap</a><a href="https://rushstack.io/pages/shop/" class="suiteNavItem_tL2w">Shop</a><a href="https://rushstack.io/community/events/" class="suiteNavItem_tL2w">Events</a></div><div role="region" aria-label="Skip to main content"><a class="skipToContent_sQ89" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/site/api-extractor.svg" alt="API Extractor" class="themedImage_SmPy themedImage--light_jc2g"><img src="/images/site/api-extractor.svg" alt="API Extractor" class="themedImage_SmPy themedImage--dark_D6nB"></div><b class="navbar__title text--truncate">API Extractor</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pages/overview/intro/">Docs</a><a class="navbar__item navbar__link" href="/pages/news/">News</a><a class="navbar__item navbar__link" href="/pages/developer/api/">API</a><a class="navbar__item navbar__link" href="/pages/contributing/building/">GitHub</a><a class="navbar__item navbar__link" href="/pages/setup/help/">Help</a><div class="searchBox_wgNs"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_A0IM docsWrapper_kGXj"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_lVE9" type="button"></button><div class="docPage_ulef"><aside class="theme-doc-sidebar-container docSidebarContainer_APyL"><div class="sidebarViewport_Ic2x"><div class="sidebar_IuMp"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_lHqR"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Overview</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/overview/intro/">What is API Extractor?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/overview/demo_project/">A sample project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/overview/demo_api_report/">The API report</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/overview/demo_rollup/">The .d.ts rollup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/overview/demo_docs/">API documentation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Setting up your project</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/setup/invoking/">Invoking API Extractor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/setup/configure_api_report/">Configuring an API report</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/setup/configure_rollup/">Configuring a .d.ts rollup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/setup/generating_docs/">Generating API docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/setup/custom_docs/">Integrating a custom doc pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/setup/help/">Getting Help</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Doc comment syntax</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/doc_comment_syntax/">Doc comment syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/declaration_references/">Declaration references</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_alpha/">@alpha</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_beta/">@beta</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_defaultvalue/">@defaultValue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_deprecated/">@deprecated</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_eventproperty/">@eventProperty</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_example/">@example</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_inheritdoc/">{@inheritDoc}</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_internal/">@internal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_link/">{@link}</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_override/">@override</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_packagedocumentation/">@packageDocumentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_param/">@param</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_preapproved/">@preapproved</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_privateremarks/">@privateRemarks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_public/">@public</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_readonly/">@readonly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_remarks/">@remarks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_returns/">@returns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_sealed/">@sealed</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_typeparam/">@typeParam</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tsdoc/tag_virtual/">@virtual</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Message reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-cyclic-inherit-doc/">ae-cyclic-inherit-doc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-different-release-tags/">ae-different-release-tags</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-extra-release-tag/">ae-extra-release-tag</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-forgotten-export/">ae-forgotten-export</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-incompatible-release-tags/">ae-incompatible-release-tags</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-internal-missing-underscore/">ae-internal-missing-underscore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-internal-mixed-release-tag/">ae-internal-mixed-release-tag</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-misplaced-package-tag/">ae-misplaced-package-tag</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-missing-getter/">ae-missing-getter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-missing-release-tag/">ae-missing-release-tag</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-preapproved-bad-release-tag/">ae-preapproved-bad-release-tag</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-preapproved-unsupported-type/">ae-preapproved-unsupported-type</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-setter-with-docs/">ae-setter-with-docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-unresolved-inheritdoc-base/">ae-unresolved-inheritdoc-base</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-unresolved-inheritdoc-reference/">ae-unresolved-inheritdoc-reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-unresolved-link/">ae-unresolved-link</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/messages/ae-wrong-input-file-type/">ae-wrong-input-file-type</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Command line</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/api-extractor_init/">api-extractor init</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/api-extractor_run/">api-extractor run</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/api-documenter_markdown/">api-documenter markdown</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/api-documenter_yaml/">api-documenter yaml</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Config files</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/api-extractor_json/">api-extractor.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/tsdoc_json/">tsdoc.json</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Developer scenarios</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/developer/api/">API packages</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Contributing</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/contributing/building/">Building the code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/contributing/debugging/">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pages/contributing/architecture/">Architecture notes</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_BzXK"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_wG_o"><div class="docItemContainer_jqGH"><article><div class="tocCollapsible_Vels theme-doc-toc-mobile tocMobile_PauL"><button type="button" class="clean-btn tocCollapsibleButton_PIvq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Architecture notes</h1></header><p>If you&#x27;re interested in contributing, here&#x27;s some general architectural notes that will hopefully help you find
your way around the code base. (By the way, if you&#x27;d like to see more detail about specific aspects or topics,
please let use know by creating a GitHib issue in the <a href="https://github.com/microsoft/api-extractor.com-website/" target="_blank" rel="noopener noreferrer">api-extractor.com-website</a> repo.)</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="project-anatomy">Project anatomy<a href="#project-anatomy" class="hash-link" aria-label="Direct link to Project anatomy" title="Direct link to Project anatomy">​</a></h2><p>API Extractor&#x27;s code is separated into source code folders that reflect subsystems that can be arranged
into a rough overall operational flow.</p><ul><li><p><a href="https://github.com/microsoft/rushstack/tree/main/apps/api-extractor/src/cli" target="_blank" rel="noopener noreferrer">src/cli</a> -
the command-line interface (CLI) that gets things started</p></li><li><p><a href="https://github.com/microsoft/rushstack/tree/main/apps/api-extractor/src/api" target="_blank" rel="noopener noreferrer">src/api</a> -
this folder contains the public API such as <code>Extractor</code> and <code>ExtractorConfig</code>. The CLI invokes these
APIs the same way that an external consumer would; it doesn&#x27;t use any special internals. The TypeScript
compiler gets configured in this stage, producing the <code>ts.Program</code> object that will be used below.</p></li><li><p><a href="https://github.com/microsoft/rushstack/tree/main/apps/api-extractor/src/collector" target="_blank" rel="noopener noreferrer">src/collector</a> -
The <code>Collector</code> acts as a central orchestrator that runs many of the stages below. Conceptually it is &quot;collecting&quot;
all the API information in a central place, primarily <code>CollectorEntity</code> objects. This folder also has the
<code>MessageRouter</code> class that routes errors and warnings based on the <code>&quot;messages&quot;</code> table from <strong>api-extractor.json</strong>.</p></li><li><p><a href="https://github.com/microsoft/rushstack/tree/main/apps/api-extractor/src/analyzer" target="_blank" rel="noopener noreferrer">src/analyzer</a> -
the core analyzer, which traverses the TypeScript compiler&#x27;s abstract syntax tree (AST) and produces
the higher-level representations used by API Extractor. There are 4 major pieces of tech here:</p><ul><li><p>The <code>AstSymbol</code> and <code>AstDeclaration</code> classes, which mirror the compiler&#x27;s <code>ts.Symbol</code> and <code>ts.Declaration</code>
classes. The difference is that an <code>AstDeclaration</code> node is only generated for a subset of interesting nodes
(e.g. classes, enums, interfaces, etc.) that will become &quot;API items&quot; in the documentation website and its
<code>api-extractor-model</code> representation. This condensed tree omits all the intermediary <code>ts.Declaration</code>
nodes (e.g. <code>extends</code> clauses, <code>:</code> tokens, and so forth). The
<a href="https://github.com/microsoft/rushstack/blob/main/apps/api-extractor/src/analyzer/AstSymbol.ts" target="_blank" rel="noopener noreferrer">AstSymbol.ts</a>
code comments provide some more detail about this very important data structure.</p></li><li><p>The <code>ExportAnalyzer</code>, which traverses chains of TypeScript <code>import</code> statements, eliminating the
intermediary symbol aliases to build a flattened view as seen in the .d.ts rollup. The problem is
that the compiler&#x27;s API makes it difficult to detect when this traversal leaves the working package
(e.g. hops into the <code>node_modules</code> folder or compiler&#x27;s runtime library). That&#x27;s why this file has special
handling for each kind of import syntax. The <code>export * from</code> construct is by far the most complicated form.</p></li><li><p>The <code>Span</code> class, which is a fairly lame but fairly effective utility for rewriting TypeScript source code
while ignoring most of its meaning except for specific node types that we recognize. API Extractor does not
use the compiler&#x27;s emitter to write .d.ts files, partially because those API were not public when we
started, but also because it more faithfully preserves the original .d.ts inputs. The
<a href="https://github.com/microsoft/rushstack/blob/716b063f20fd3df82cf8436eeb2528789b0b7c37/apps/api-extractor/src/generators/DtsRollupGenerator.ts#L154" target="_blank" rel="noopener noreferrer">DtsRollupGenerator.<!-- -->_<!-- -->modifySpan()</a>
function is a good illustration of how <code>Span</code> is used.</p></li><li><p>The <code>AstReferenceResolver</code>: Given a TSDoc declaration reference, this walks the the <code>AstSymbolTable</code> to
find whatever it refers to.</p></li></ul></li><li><p><a href="https://github.com/microsoft/rushstack/tree/main/apps/api-extractor/src/enhancers" target="_blank" rel="noopener noreferrer">src/enhancers</a> -
After the <code>Collector</code> has collected all the API objects and their metadata, we run a series of additional
postprocessing stages called <code>enhancers</code>. The current ones are <code>ValidationEnhancer</code> (which applies some
API validation rules) and <code>DocCommentEnhancer</code> which tunes up the TSDoc comments, for example expanding
the <code>@inheritDoc</code> references.</p></li><li><p><a href="https://github.com/microsoft/rushstack/tree/main/apps/api-extractor/src/generators" target="_blank" rel="noopener noreferrer">src/generators</a> -
This folder implements API Extractor&#x27;s famous 3 output types: <code>ApiReportGenerator</code>, <code>DtsRollupGenerator</code>,
and <code>ApiModelGenerator</code>.</p></li><li><p><a href="https://github.com/microsoft/rushstack/tree/main/apps/api-extractor/src/schemas" target="_blank" rel="noopener noreferrer">src/schemas</a> -
This folder contains the <code>api-extractor init</code> template file, the JSON schema for <strong>api-extractor.json</strong>,
and <strong>api-extractor-defaults.json</strong> which represents the default values for <strong>api-extractor.json</strong> settings.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_abXo" id="data-flow">Data flow<a href="#data-flow" class="hash-link" aria-label="Direct link to Data flow" title="Direct link to Data flow">​</a></h2><p>Another useful way to understand API Extractor is by examining what happens to a declaration as it
gets transformed by each stage. Consider a simple <code>function</code> declaration that has two overloads:</p><div class="language-ts codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-ts codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Report </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;reporting-package&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/** Declaration 1 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">report</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Report</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> amount</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/** Declaration 2 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">report</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Report</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here&#x27;s how it gets processed:</p><ul><li><p><strong>Compiler stage:</strong> The TypeScript compiler engine parses the .d.ts file into two <code>ts.Declaration</code> objects
(one for each overload) representing the parsed syntax. The compiler&#x27;s analyzer then makes an associated
<code>ts.Symbol</code> which represents the function&#x27;s type. Each TypeScript type always becomes exactly one symbol,
and in this case with two associated declarations (the two overloads). There will also be many
&quot;aliases&quot; for this symbol. For example, if we write <code>import { add } from &quot;./math&quot;</code>, the word <code>add</code> here becomes
a symbol alias whose declaration is that <code>import</code> statement. If we follow the chain of symbol aliases (perhaps
through many imports and exports), we will always reach the unique &quot;followed symbol&quot; corresponding to the original
real definition of <code>add()</code>.</p></li><li><p><strong>Analyzer stage:</strong> API Extractor starts from your API entry point and follows each export to find its
&quot;followed symbol&quot;. Then we make an <code>AstSymbol</code> and two <code>AstDeclaration</code>&#x27;s for <code>add()</code>. The analyzer also walks up
and down the AST tree to fill out the context. For example, if the <code>AstSymbol</code> is a <code>class</code>, then we&#x27;ll create
a child <code>AstSymbol</code> for each of its members. And if the class belongs to a <code>namespace</code>, then a parent <code>AstSymbol</code>
is added representing the namespace.</p><p>While following <code>import</code> statements, if we reach an external NPM package, the analysis stops there and
produces an <code>AstImport</code> instead of a regular <code>AstSymbol</code>. This is because API Extractor understands
package boundaries, and in fact is designed to be invoked separately on each project. Thus, in the above example,
<code>Report</code> would become an <code>AstImport</code> instead of an <code>AstSymbol</code>. The analyzer&#x27;s overall job is to pick through
the extremely detailed compiler data structures and produce a simplified tree of <code>AstSymbol</code> objects. This
algorithm is the most complex stage of API Extractor, so we try to keep it isolated and single-purpose.</p></li><li><p><strong>Collector stage:</strong> The collector builds the inventory of things that will end up as top-level items
in the .d.ts rollup. We call these <code>CollectorEntity</code> objects, and there is one for our <code>add()</code> function,
and another one for the <code>Report</code> import. So <code>AstSymbol</code> and <code>AstImport</code> can become a <code>CollectorEntity</code>.
But note that <code>AstDeclaration</code> cannot, nor can <code>AstModule</code> (the analyzer&#x27;s representation of a .d.ts source file).
To keep this straight, the analyzer&#x27;s objects inherit from the <code>AstEntity</code> base class if-and-only-if they
can become a <code>CollectorEntity</code>. The <code>CollectorEntity</code> wraps <code>AstEntity</code> and appends some additional
collector stage information:</p><ul><li>Whether the entity is an <code>export</code> of your .d.ts rollup or just a local declaration.</li><li>The local name in the .d.ts rollup, since local declarations may need to get renamed
by <code>DtsRollupGenerator._makeUniqueNames()</code> to avoid naming conflicts</li><li>The export name(s) which can be different from the local name. For example:
<code>export { A as B, A as C }</code>.</li></ul></li><li><p><strong>Enhancers stage:</strong> The enhancers mostly work with the <code>DeclarationMetadata</code>, <code>ApiItemMetadata</code>, and <code>SymbolMetadata</code>
objects. These objects are stored on <code>AstSymbol</code> and <code>AstDeclaration</code>, but they are entirely owned by the collector
stage.</p></li><li><p><strong>ApiReportGenerator and DtsRollupGenerator:</strong> These generators essentially just dump the <code>CollectorEntity</code>
items into a big text file, but with different formatting. Other than trimming items according to release type,
they don&#x27;t do much processing.</p></li><li><p><strong>api-extractor-model stage:</strong> The <strong>@microsoft/api-extractor-model</strong> package is completely independent and does not
rely on any of the other API Extractor types described above. It defines the portable .api.json file format.
It has its own rich hierarchy inheriting from the <code>ApiItem</code> base class (mixin inheritance actually): <code>ApiClass</code>,
<code>ApiNamespace</code>, <code>ApiParameter</code>, etc. In our example, the <code>add()</code> function will become an <code>ApiFunction</code> item
in this representation. This model is designed to make it easy for third parties to generate documentation without
having to understand the thorny compiler data structures. Thus the <code>ApiModelGenerator</code> takes our <code>CollectorEntity</code>
for <code>add()</code> and converts it into an <code>ApiFunction</code> that will get serialized into .api.json.</p><p>Recall that the analyzer internally used the <code>AstReferenceResolver</code> helper to look up TSDoc declaration references
and find the target <code>AstDeclaration</code>. For the .api.json files, <strong>@microsoft/api-extractor-model</strong> provides
an analogous <code>ModelReferenceResolver</code> helper that looks up <code>ApiItem</code> targets.</p></li><li><p><strong>API Documenter stage:</strong> Okay, one final transformation happens here. It&#x27;s the last one! :-) When API Documenter
loads up the .api.json file, it does not render it directly to .md files. First it converts the <code>ApiFunction</code>
for our <code>add()</code> example function into a tree of TSDoc <code>DocNode</code> elements. Normally <code>DocNode</code> is used to represent
doc comments. But it happens to be a full DOM-like structure that can represent rich text. Since the TSDoc comment
for <code>add()</code> is already this kind of rich text, API Documenter cleverly reuses this representation to model an
entire web page. This intermediate representation enables the markdown emitter to be decoupled from the documentation
engine, and makes it easy in the future to output other formats such as HTML or React.</p></li></ul><p>To summarize, for the humble <code>add()</code> function this pipeline produced a number of different representations:</p><ul><li><code>AstDeclaration</code> for the overload declarations</li><li><code>AstSymbol</code> for the TypeScript type</li><li><code>CollectorEntity</code> for the entry in the .d.ts file</li><li><code>DeclarationMetadata</code>, <code>ApiItemMetadata</code>, and <code>SymbolMetadata</code> to annotate the symbol and declaration with more info</li><li><code>ApiFunction</code> for the .api.json file</li><li><code>DocNode</code> subtree for the documentation website</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/microsoft/rushstack-websites/tree/main/websites/api-extractor.com/docs/pages/contributing/architecture.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_DX5v" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_hn6L"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/pages/contributing/debugging/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Debugging</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_JkeW thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#project-anatomy" class="table-of-contents__link toc-highlight">Project anatomy</a></li><li><a href="#data-flow" class="table-of-contents__link toc-highlight">Data flow</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">© 2023 Microsoft</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7c811889.js"></script>
<script src="/assets/js/main.7205f7fd.js"></script>
</body>
</html>